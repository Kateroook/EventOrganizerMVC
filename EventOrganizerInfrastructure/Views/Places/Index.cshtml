@model IEnumerable<EventOrganizerDomain.Model.Place>

@{
    ViewData["Title"] = "Місця у місті " + ViewBag.CityName;
}

<h1 class="block-header">Місця у місті @ViewBag.CityName</h1>

<div class="row row-cols-1 row-cols-md-3 g-3">
    @foreach (var place in Model)
    {
        <div class="col">
            <div class="card place-card">
                @if (!string.IsNullOrEmpty(place.ImageUrl))
                {
                    <img src="@place.ImageUrl" class="card-img-top" alt="Постер події">

                }
                <div class="card-body">
                    <h5 class="card-title">@place.Name</h5>
                    <p class="card-text event-place">@place.Address</p>
                    <p class="card-text">@place.Events.Count() подій</p>
                </div>
                <div class="card-bottom card-buttons">
                    <a asp-action="Details" asp-route-id="@place.Id" class="btn btn-primary btn-details">Про місце</a>
                </div>
            </div>
        </div>
    }
</div>

    <h3 class="block-header">Популярні події у місті @ViewBag.CityName</h3>
    
    <div class="row row-cols-1 row-cols-md-4 g-3">
        @foreach (var e in ViewBag.PopularEventsInCity)
        {
            <div class="col">
                <div class="card event-card">

                    @if (!string.IsNullOrEmpty(@e.PictureUrl))
                    {
                        <img src="@e.PictureUrl" class="card-img-top" alt="Постер події">

                    }
                    <div class="card-body d-flex flex-column justify-content-between">

                        <div class="card-text align-items-top">
                            <p class="card-text mt-50"><span class="event-date">@e.DateTimeStart.ToString("dd MMMM, HH:mm, ddd")</span></p>
                            <h5 class="card-title">@e.Title</h5>
                        </div>

                        <div class="card-text align-items-end">
                            <p class="card-text mt-auto mb-15">
                                <span class="event-place">@e.Place.Name</span>
                            </p>
                            <p class="card-text  event-price">
                                @if (@e.Price != 0)
                                {
                                    <strong>від @e.Price₴</strong>
                                }
                                else
                                {
                                    <strong>FREE</strong>
                                }
                            </p>
                        </div>
                    </div>
                    <div class="card-bottom card-buttons">
                        <a asp-controller="Events" asp-action="Details" asp-route-id="@e.Id" class="btn btn-primary btn-details">Деталі</a>
                        <a asp-controller="Events" asp-action="Delete" asp-route-id="@e.Id" class="btn btn-secondary btn-delete">Видалити</a>
                    </div>
                </div>
            </div>
        }
    </div>


<div class="popular-cities">
    <h3 class="block-header">Популярні міста</h3>
    <ul class="popular-cities-list">
        @foreach (var city in ViewBag.PopularCities)
        {
            <li>
                <a href="@Url.Action("Index", "Places", new { id = city.Id })">@city.Name</a>
            </li>
        }
    </ul>
    <a asp-controller="Cities" asp-action="Index" class="btn">Показати всі міста</a>
</div>

